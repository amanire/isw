<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Progressive Web Apps</title>

		<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:700" rel="stylesheet">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="css/theme/edf.css">
		<link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="icon" href="data:;base64,iVBORwOKGO=" />

		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

<section class="title-slide">
  <h2>A Pragmatic Peek at</h2>
  <h1>Progressive Web Apps</h1>
  <p style="color: white;">Aaron Manire</p>
</section>

<section data-markdown>
  <textarea data-template>
## About me
- Full-stack web developer, IT 
- Building websites with the Drupal CMS since 2007 
- First professional responsive site built in 2013 
- Apple enthusiast 

Notes:
- Prefer UX web developer, Paul Boag, Jared Spool
- Tufts U Tisch Library
- Try not to be too vocal about being an Apple enthousiast.
  </textarea>
</section>

<section data-markdown>
  <textarea data-template>
## Disclaimer

Notes:
- Coming from the perspective of a CMS web developer
- Not an Android or Windows Store user
- Intro to Service Workers
amanire.com/isw

Less technical overview of more general interest.

Honestly haven't thought much about service workers for well over year but
wanted to revisit.
  </textarea>
</section>

<section>
  <h2>Web sites</h2>
  <section data-markdown>
    <textarea data-template>
  - Documents (The DOM)
  - HTML, CSS, and JavaScript 
 
  Notes:
  - "Worldwide web"
  - search engine integregated into browser
  - https://cloudfour.com
  - https://edf.org
    </textarea>
  </section>
  <section data-markdown>
    <textarea data-template>
- Reach
  - Domain name 
  - Linkable, shareable via URLs 
  - Indexed by search engines 
  Notes:
  - "Worldwide web"
  - search engine integregated into browser
</textarea>
</section>
<section data-markdown>
  <textarea data-template>
### Responsive
- Adapt to device viewport size 
- Reflow content 
Notes:
- https://cloudfour.com
</textarea>
</section>
<section data-markdown>
  <textarea data-template>
### Accessible via progressive enhancement
- Site hierarchy and navigation 
- Device capabilities 
- User preferences 
Notes:
- https://edf.org
  - HTML Hierarchy
  - Reduce motion
- https://ethanmarcotte.com
  - Browser font size
  - Dark mode
    </textarea>
  </section>
</section>
<section data-markdown>
  <textarea data-template>
## Web apps
Websites + â€¦  

- Client-side interactivity 
- XHR/AJAX 
- Personalized 
- URL paths are often deemphasized 

Notes:
- Examples
  - Gmail
  - GitHub
- Things like notifications
- App-like affordances on
  - edf.org
  - scienceintheclassroom.org
  - This presentation, show source code
  - https://revealjs.com
  - https://notist.ninja/embed/NTfnrb
  </textarea>
</section>

<section>
  <h2>Native apps</h2>
  <section data-markdown>
    <textarea data-template>
### Operating Systems
- Desktop
  - Windows
  - MacOS
  - ChromeOS
  - Linux
- Mobile
  - Android
  - iOS

  Notes:
- Preview
- Fantastical
    </textarea>
  </section>
  <section data-markdown>
    <textarea data-template>
      - Strong OS integration
      - Hardware access: USB, camera, accelerometer 
      - No URLs 
      - Performance 
      - Security 
      - Expensive to maintain across platforms 
    </textarea>
  </section>
</section>

<section>
  <h2>Compile to native</h2> 
  <section data-markdown>
    <textarea data-template>
### Desktop

![](images/electron.png)

[electronjs.org](https://www.electronjs.org/)

Notes:
- Proton Native
- Electron takes up a lot of redundant storage and RAM. Chromium rendering engine and Node.js runtime.
- Slack
- Skype
- Visual Studio Code
- Figma
- Windows 95
    </textarea>
  </section>
  <section data-markdown>
    <textarea data-template>
### Mobile

- Apache Cordova (PhoneGap)
- React Native
- NativeScript
- Flutter
- Ionic
    </textarea>
  </section>
</section>

<section>
  <h2>Progressive Web Apps</h2>
  <section>
    <div class="two-column" style="margin-bottom: 1em;">
      <div>
        <ul>
          <li>Linkable</li>
          <li>Responsive</li>
          <li>App-like-interactions</li>
          <li>Connectivity independent</li>
        </ul>
      </div>
      <div>
        <ul>
          <li>Safe</li>
          <li>Discoverable</li>
          <li>Re-engageable</li>
          <li>Fresh</li>
          <li>Installable</li>
        </ul>
      </div>
    </div>
    <p><small>Alex Russell & Frances Berriman<br/>
      <a href="https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/">infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul</a></small></p>
    </section>
  <section>
    <h3>Any site can be a PWA</h3>
    <ul>
      <li>HTTPS</li>
      <li>Service Worker</li>
      <li>Manifest JSON file</li>
    </ul>
    <p><small>Jeremey Keith<br/>
      <a href="https://adactio.com/journal/13884">adactio.com/journal/13884</a></small>
    </p>
    <aside class="notes">Revisit https://cloudfour.com to demonstrate offline functionality</aside>
  </section>
</section>

<section>
  <h2>Manifest</h2>
  <section data-markdown>
    <textarea data-template>
```
<link rel="manifest" href="/manifest.json">
```

or

```
<link rel="manifest" href="manifest.webmanifest">
```
    </textarea>
  </section>
  <section data-markdown>
    <textarea data-template>
      ### Example manifest contents

```
{
  "short_name": "EDF",
  "name": "Environmental Defense Fund",
  "icons": [
      {
          "src": "/images/icons-192.png",
          "type": "image/png",
          "sizes": "192x192"
      },
      {
          "src": "/images/icons-512.png",
          "type": "image/png",
          "sizes": "512x512"
      }
  ],
  "background_color": "#3367D6",
  "theme_color": "#3367D6"
  "display": "standalone",
  "scope": "/app/",
  "start_url": "/index.html",
}
```

    </textarea>
  </section>
</section>


<section>
  <h2>Register Service Worker</h2>
  <code>/index.html</code>

  <section>
    <p>via inline script tag</p>
  </section>

  <section>
<pre><code class="javascript" data-trim data-noescape>
&lt;script&gt;
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('/serviceworker.js');
}
&lt;/script&gt;
</code></pre>
  <p>No modern JavaScript here!</p>
  </section>

  <section>
    <h3>Progressive enhancement</h3>
    <p>Service worker file is ignored if unsupported by browser.</p>
  </section>

  <section>
    <h3>Scope</h3>
<pre><code class="javascript" data-trim data-noescape>
&lt;script&gt;
if (navigator.serviceWorker) {
navigator.serviceWorker.register('/serviceworker.js',
<mark>{scope: '/app/'}</mark>
);
}
&lt;/script&gt;
</code></pre>
  </section>
</section>

<section>
  <h2>Service Worker</h2>
  <section>
    <h3>Network Request</h3>
    <img src="images/network-request.svg" />
    <aside class="notes"></aside>
  </section>
  <section>
    <h3>Failure and frustration</h3>
    <ul>
      <li>No nearby cell tower</li>
      <li>Flaky Wifi</li>
      <li>Traffic spikes, e.g a major event</li>
      <li>ISP trouble</li>
      <li>Power outage</li>
      <li>Site server is down</li>
    </ul>
    <aside class="notes"></aside>
  </section>
  <section>
    <img style="margin-top: 1em;" src="images/network-request-sw.svg" />
    <aside class="notes"></aside>
  </section>
</section>

<section>
  <h2>HTTPS</h2>
  <section data-markdown>
    <textarea data-template>
### Certificate Authority

Organization and extended validation of certificates.

![](images/entrust-ca-logo.svg)
    </textarea>
  </section>
  <section>
    <div class="two-column">
      <div>
        <img style="background-color: #fff; padding: 20px; max-height: none;" src="images/letsencrypt-logo-horizontal.svg"/><br/>
        <div><small><a href="https://letsencrypt.org/">letsencrypt.org</a></small></div>
      </div>
      <div>
        <img style="background-color: #fff; padding: 20px; width:300px; max-height: none;" src="images/certbot-logo-1A.svg">
        <div><small><a href="https://certbot.eff.org/">certbot.eff.org</a></small></div>
      </div>
    </div>
  </section>
  <section data-markdown>
    <textarea data-template>
or localhost for development
    </textarea>
  </section>
</section>

<section>
  <h2>SW Caching Strategies</h2>
  <section>
    <p>Stale while revalidate</p>
    <img src="images/stale-while-revalidate.png"/>
    <small>Source: <a href="https://web.dev/offline-cookbook">The Offline Cookbook</a> by Jake Archibald</small>

    <aside class="notes">Ideal for: frequently updating resources where having the very latest version is non-essential. Avatars can fall into this category.

    If there's a cached version available, use it, but fetch an update for next time.
    </aside>
    </textarea>
  </section>
  <section>
    <p>Cache First (Cache Falling Back to Network)</p>
    <img src="images/cache-first.png"/>
    <small>Source: <a href="https://web.dev/offline-cookbook">The Offline Cookbook</a> by Jake Archibald</small>

    <aside class="notes">Ideal for: building offline-first. In such cases, this is how you'll handle the majority of requests. Other patterns will be exceptions based on the incoming request.
    </aside>
  </section>
  <section>
    <h3>Network or cache</h3>
    <p><a href="https://serviceworke.rs/strategy-network-or-cache_demo.html">Demo</a></p>
    <small>Source: <a href="https://serviceworke.rs/strategy-network-or-cache.html">The Service Worker Cookbook</a> by Mozilla</small>

    <aside class="notes">The service worker in this recipe tries to retrieve the most up to date content from the network but if the network is taking too long, it will serve cached content instead.
    </aside>
  </section>
  <section>
    <h3>Use case: gated content</h3>
    <p><img src="images/picalilli.svg"></p>
    <p><a href="https://piccalil.li/">https://piccalil.li</a></p>
    <small>Source: <a href="https://css-tricks.com/learning-to-simplify">css-tricks.com/learning-to-simplify/</a></small>
    <aside class="notes">When you buy a course, my little API scurries along to that site and finds all the content for it. It then pushes that down to you. Then, the platform takes over because I use the baked-in Cache and Response APIs. I create a Response for each lesson in the course, then stick it in the Cache. This means that whenever you go to a lesson, you get that version that was previously hidden from you. The added bonus to this is that the content is offline-first, too.</aside>
  </section>
</section>

<section data-markdown>
  <textarea data-template>
## Web APIs
- Cache 
- Fetch 
- Web Share  
- Clipboard  
- Push  
- Payment  
- File System Access  
- Full Screen  
- and growing, see Chromium Fugu Project â€¦
  </textarea>
</section>

<section data-markdown>
  <textarea data-template>

# Example PWAs

- [Santa Tracker](https://santatracker.google.com)
- [Twitter](https://twitter.com)
- [Unsplash](https://unsplash.com)
- [Sqoosh](https://squoosh.app)
- [Excalidraw](https://excalidraw.com)
- [Google Stadia](https://stadia.google.com)
- [MS Outlook](https://outlook.office.com) (requires MS365 access)

Notes:
- Stadia just announced iOS beta (Apple's restrictions on cloud gaming apps)
  https://support.google.com/stadia/answer/10204874?hl=en
- Outlook Project Monarch https://www.windowscentral.com/project-monarch-outlook-web-universal-email-client-microsoft
  </textarea>
</section>

<section>
  <h2>Tools and Resources</h2> 
  <section data-markdown>
    <textarea data-template>
### Chrome developer tools

![](images/chrome-logo.svg)

[chromium.org/blink/serviceworker/service-worker-faq](https://chromium.org/blink/serviceworker/service-worker-faq)
    </textarea>
  </section>
  <section>
    <img src="images/workbox-logo.svg" style="height:150px; width:auto;">
    <p>A set of libraries that can power a production-ready service worker for your Progressive Web App.</p>
    <p><small><a href="https://developers.google.com/web/tools/workbox/">developers.google.com/web/tools/workbox/</a></small></p>
  </section>
  <section data-markdown data-background-color="#1fc2c8">
    <textarea data-template>
<img src="images/pwa-builder-logo.svg" style="height:150px; width:auto;">
<p><small><a style="color:white;" href="https://www.pwabuilder.com/">pwabuilder.com</a></small></p>
    </textarea>
  </section>
  <section data-markdown>
    <textarea data-template>
### Drupal module

Progressive Web App

[drupal.org/project/pwa](https://www.drupal.org/project/pwa)
    </textarea>
  </section>
  <section data-markdown>
    <textarea data-template>
      ### Wordpress plugin
      
      ![](images/superpwa-logo.png)
      
      [superpwa.com](https://superpwa.com)
    </textarea>
  </section>
  <section>
    <h3>Lighthouse</h3>
    <img src="images/pwa-lighthouse.png" style="height:150px; width:auto;">
    <p>Audits for performance, accessibility, progressive web apps, and more.</p>
    <p><small><a href="https://developers.google.com/web/tools/lighthouse/">developers.google.com/web/tools/lighthouse/</a></small></p>
  </section>
  <section>
    <h3>webhint</h3>
    <img src="images/webhint-logo.svg" style="height:150px; width:auto;">
    <p><small><a href="https://webhint.io">webhint.io</a></small></p>
  </section>
</section>

<section data-markdown>
  <textarea data-template>
## PWAs gone bad
- Broken service worker
  testingjavascript.com
  [twitter.com/kentcdodds/status/1053343015580852224](https://twitter.com/kentcdodds/status/1053343015580852224)
- Notifications
- Poor responsiveness
- External URLs in standalone mode

Notes:
  - Gatsby Starter
  - Create React App
  </textarea>
</section>

<section data-markdown>
  <textarea data-template>
## PWA native gaps

- Browser menu bar
- Browser extensions
- Multiple browsers
- Stability

Notes:
  - XXX
  </textarea>
</section>

<section>
  <h2>Elephant in the room: Apple</h2>
<section data-markdown>
  <textarea data-template>

![](images/safari-is-the-new-ie.png)

[safari-is-the-new-ie.com](https://www.safari-is-the-new-ie.com/)
  </textarea>
</section>
<section data-markdown>
  <textarea data-template>
- App Clips https://developer.apple.com/app-clips/
- Safari's lack of support for Web APIs
  - push notifications
  - Background sync
  - App Store/profit 
- Safari 7 day cap on storage, including service worker registrations
(unless installed via _Add to Home Screen_)

Notes:
  - App Clips introduced at Apple's developer conference in June 2020
  </textarea>
</section>
<section data-markdown>
  <textarea data-template>
The author of the viral blog post has since recanted.

[nolanlawson.com/2019/01/01/things-ive-been-wrong-about-things-ive-been-right-about/#wrong-safari-is-the-new-ie](https://nolanlawson.com/2019/01/01/things-ive-been-wrong-about-things-ive-been-right-about/#wrong-safari-is-the-new-ie)

> As it turns out, Safari is not really the new IE. 
</textarea>
</section>
<section data-markdown>
  <textarea data-template>
### Apple's priorities

- Privacy
- Battery life
- Security
- Accessibility

  </textarea>
</section>
</section>

<section data-markdown>
  <textarea data-template>
## Further Reading

- Chromium Web Capabilities (Project Fugu)
https://web.dev/fugu-status/

- Platform Adjacency Theory
https://infrequently.org/2020/06/platform-adjacency-theory/

- Should The Web Expose Hardware Capabilities? 
https://www.smashingmagazine.com/2021/01/web-expose-hardware-capabilities/
  </textarea>
</section>
<section>
  <h2>Thank you</h2>
  <p><a href="https://amanire.com/pwa">amanire.com/pwa</a></p>
  <p>Aaron Manire</p>
  <p><small><a href="mailto:amanire@edf.org">amanire@edf.org</a></small><br/>
</section>

			</div> <!-- .slides -->
		</div> <!-- .reveal -->

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); hljs.configure({tabReplace: '  '}) }}
				]
			});
		</script>
	</body>
</html>
